<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç | Dark Market Ultra</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>
  <nav>
    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
    <a href="home.html" class="active">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</a>
    <a href="games.html">–ò–≥—Ä—ã</a>
    <a href="movies.html">–§–∏–ª—å–º—ã</a>
    <a href="music.html">–ú—É–∑—ã–∫–∞</a>
    <a href="images.html">–ö–∞—Ä—Ç–∏–Ω–∫–∏</a>
    <a href="books.html">–ö–Ω–∏–≥–∏</a>
    <a href="apps.html">–ü—Ä–æ–≥—Ä–∞–º–º—ã</a>
    <a href="tools.html">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</a>
    <a href="donate.html">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</a>
  </nav>

  <main>
    <header>
      <h1 class="neon-logo">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
      <p class="subtitle">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="username">–ì–æ—Å—Ç—å</span>!</p>
    </header>

    <section class="profile-section">
      <div class="profile-card">
        <img id="avatarPreview" src="default-avatar.png" alt="–ê–≤–∞—Ç–∞—Ä" class="avatar">
        <form id="avatarForm" enctype="multipart/form-data">
          <input type="file" id="avatarUpload" name="avatar" accept="image/*">
          <button type="submit" class="neon-button">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ</button>
        </form>
        <progress id="avatarProgress" value="0" max="100" style="display:none;"></progress>
      </div>

      <div class="profile-info">
        <h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        <p><strong>Email:</strong> <span id="email">guest@example.com</span></p>
        <p><strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="status">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span></p>
        <p><strong>–ü–æ–¥–ø–∏—Å–∫–∞:</strong> <span id="subscription">–ù–µ—Ç</span></p>
        <label for="about">–û —Å–µ–±–µ:</label>
        <textarea id="about" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –ø–∞—Ä—É —Å–ª–æ–≤ –æ —Å–µ–±–µ..."></textarea>
        <button id="saveAbout" class="neon-button">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </section>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ -->
    <section class="upload-section">
      <h2 class="neon-title">–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã</h2>
      <form id="uploadForm" enctype="multipart/form-data">
        <select id="category" name="category" required>
          <option value="games">–ò–≥—Ä—ã</option>
          <option value="movies">–§–∏–ª—å–º—ã</option>
          <option value="music">–ú—É–∑—ã–∫–∞</option>
          <option value="images">–ö–∞—Ä—Ç–∏–Ω–∫–∏</option>
          <option value="books">–ö–Ω–∏–≥–∏</option>
          <option value="apps">–ü—Ä–æ–≥—Ä–∞–º–º—ã</option>
          <option value="tools">–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è</option>
        </select>
        <input type="file" id="fileUpload" name="file" required>
        <input type="number" id="price" name="price" placeholder="–¶–µ–Ω–∞ (0 = –±–µ—Å–ø–ª–∞—Ç–Ω–æ)" min="0" value="0">
        <button type="submit" class="neon-button">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        <progress id="fileProgress" value="0" max="100" style="display:none;"></progress>
      </form>
    </section>

    <!-- –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
    <section id="adminPanel" class="admin-panel" style="display:none;">
      <h2 class="neon-title">üëë –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
      <div class="admin-tools">
        <input type="text" id="blockUserEmail" placeholder="Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è">
        <button id="blockUserBtn" class="neon-button">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
        <input type="text" id="blockAppName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è">
        <button id="blockAppBtn" class="neon-button">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
      </div>
    </section>
  </main>

  <footer>
    <p>&copy; 2025 Dark Market Ultra</p>
  </footer>

  <script>
    // –ü—Ä–µ–≤—å—é –∞–≤–∞—Ç–∞—Ä–∞
    document.getElementById('avatarUpload').addEventListener('change', e => {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = ev => document.getElementById('avatarPreview').src = ev.target.result;
        reader.readAsDataURL(file);
      }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã –∞–≤–∞—Ç–∞—Ä–∞
    document.getElementById('avatarForm').addEventListener('submit', async e => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const progressBar = document.getElementById('avatarProgress');
      progressBar.style.display = 'block';

      try {
        const response = await fetch('/upload-avatar', {
          method: 'POST',
          body: formData
        });
        if (response.ok) {
          alert('–ê–≤–∞—Ç–∞—Ä —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!');
          e.target.reset();
          progressBar.value = 0;
        } else {
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∞–≤–∞—Ç–∞—Ä–∞.');
        }
      } catch (err) {
        alert('–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.');
      }
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º—ã —Ñ–∞–π–ª–æ–≤
    document.getElementById('uploadForm').addEventListener('submit', async e => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const progressBar = document.getElementById('fileProgress');
      progressBar.style.display = 'block';

      try {
        const response = await fetch('/upload-file', {
          method: 'POST',
          body: formData
        });
        if (response.ok) {
          alert('–§–∞–π–ª —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!');
          e.target.reset();
          progressBar.value = 0;
        } else {
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞.');
        }
      } catch (err) {
        alert('–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω.');
      }
    });
  </script>
</body>
</html>
